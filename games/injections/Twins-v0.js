(function() {

  var c2 = window.construct2api;

  var gameOver = false;
  window.muniverse = {
    init: function() {
      return c2.waitStart('Game').then(function() {
        window.faketime.pause();
        var startActions = [
          "1851297203172589",
          "228753660943099",
          "241368541906159",
          "416864558353451",
          "119145229365271",
          "1691735298658291",
          "792436249758539",
          "107285523526847",
          "3203617066596731",
          "9056865316152838",
          "3706833106313872",
          "1645714951464963",
          "1150764003682042",
          "1001837467091637",
          "9715992606739724",
          "571273300247036",
          "6029466295208036",
          "8257914319645084",
          "4126609865989209",
          "9543488061610864",
          "3807538682966564",
          "7181995871152998",
          "7886214170127376",
          "4286959004968254",
          "7856101021955011",
          "6144983032974021",
          "1638319297216416",
          "8195898227406143",
          "4668042337873552",
          "8327480100266767",
          "7209414677342595",
          "4855499214044951",
          "2219507844815649",
          "4505311455885122",
          "2475988096186141",
          "8915095982635582",
          "7366494798172276",
          "4434964486482928",
          "4356806626340371",
          "3018427438165503",
          "656043499539164",
          "7006551689525176",
          "2179054818841534"
        ];
        c2.runActions(startActions);
        c2.hijackAction('7618523762154123', () => gameOver = true);
        window.faketime.advance(100);
      });
    },
    step: function(millis) {
      window.faketime.advance(millis);
      return Promise.resolve(gameOver);
    },
    score: function() {
      return Promise.resolve(c2.globalVar('Score').getValue());
    }
  };

})();
